window.Modernizr=function(t,p,o){function r(t,e){return typeof t===e}function a(t,e){for(var i in t){var n=t[i];if(s="-",!~(""+n).indexOf(s)&&u[n]!==o)return"pfx"!=e||n}var s;return!1}function n(t,e,i){var n=t.charAt(0).toUpperCase()+t.slice(1),s=(t+" "+y.join(n+" ")+n).split(" ");return r(e,"string")||r(e,"undefined")?a(s,e):function(t,e,i){for(var n in t){var s=e[t[n]];if(s!==o)return!1===i?t[n]:r(s,"function")?s.bind(i||e):s}return!1}(s=(t+" "+_.join(n+" ")+n).split(" "),e,i)}var e,s,i,l={},d=p.documentElement,c="modernizr",h=p.createElement(c),u=h.style,f=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),m="Webkit Moz O ms",y=m.split(" "),_=m.toLowerCase().split(" "),g={},v=[],C=v.slice,b=function(t,e,i,n){var s,o,r,a,l=p.createElement("div"),h=p.body,u=h||p.createElement("body");if(parseInt(i,10))for(;i--;)(r=p.createElement("div")).id=n?n[i]:c+(i+1),l.appendChild(r);return s=["&#173;",'<style id="s',c,'">',t,"</style>"].join(""),l.id=c,(h?l:u).innerHTML+=s,u.appendChild(l),h||(u.style.background="",u.style.overflow="hidden",a=d.style.overflow,d.style.overflow="hidden",d.appendChild(u)),o=e(l,t),h?l.parentNode.removeChild(l):(u.parentNode.removeChild(u),d.style.overflow=a),!!o},T={}.hasOwnProperty;for(var E in s=r(T,"undefined")||r(T.call,"undefined")?function(t,e){return e in t&&r(t.constructor.prototype[e],"undefined")}:function(t,e){return T.call(t,e)},Function.prototype.bind||(Function.prototype.bind=function(n){var s=this;if("function"!=typeof s)throw new TypeError;var o=C.call(arguments,1),r=function(){if(this instanceof r){var t=function(){};t.prototype=s.prototype;var e=new t,i=s.apply(e,o.concat(C.call(arguments)));return Object(i)===i?i:e}return s.apply(n,o.concat(C.call(arguments)))};return r}),g.csstransforms=function(){return!!n("transform")},g.csstransforms3d=function(){var e=!!n("perspective");return e&&"webkitPerspective"in d.style&&b("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(t){e=9===t.offsetLeft&&3===t.offsetHeight}),e},g.csstransitions=function(){return n("transition")},g)s(g,E)&&(e=E.toLowerCase(),l[e]=g[E](),v.push((l[e]?"":"no-")+e));return l.addTest=function(t,e){if("object"==typeof t)for(var i in t)s(t,i)&&l.addTest(i,t[i]);else{if(t=t.toLowerCase(),l[t]!==o)return l;e="function"==typeof e?e():e,d.className+=" "+(e?"":"no-")+t,l[t]=e}return l},i="",u.cssText=i,h=null,l._version="2.6.2",l._prefixes=f,l._domPrefixes=_,l._cssomPrefixes=y,l.testProp=function(t){return a([t])},l.testAllProps=n,l.testStyles=b,l.prefixed=function(t,e,i){return e?n(t,e,i):n(t,"pfx")},d.className=d.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+" js "+v.join(" "),l}(0,this.document),function(t){"function"==typeof define&&define.amd?define(["jquery","modernizr"],t):"object"==typeof exports?module.exports=t(require("jquery"),window.Modernizr):window.Shuffle=t(window.jQuery,window.Modernizr)}(function(p,t,r){"use strict";function o(t,e,i){for(var n=0,s=t.length;n<s;n++)if(e.call(i,t[n],n,t)==={})return}function i(t,e,i){return setTimeout(p.proxy(t,e),i)}function a(t){return Math.max.apply(Math,t)}function n(t){return p.isNumeric(t)?t:0}if("object"!=typeof t)throw new Error("Shuffle.js requires Modernizr.\nhttp://vestride.github.io/Shuffle/#dependencies");var e,s=t.prefixed("transition"),l=t.prefixed("transitionDelay"),h=t.prefixed("transitionDuration"),u={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[s],d=t.prefixed("transform"),c=(e=d)?e.replace(/([A-Z])/g,function(t,e){return"-"+e.toLowerCase()}).replace(/^ms-/,"-ms-"):"",f=t.csstransforms&&t.csstransitions,m=t.csstransforms3d,y=!!window.getComputedStyle,_="shuffle",g="all",v=window.getComputedStyle||function(){},C=function(t,e){this.x=n(t),this.y=n(e)};C.equals=function(t,e){return t.x===e.x&&t.y===e.y};var b=function(){if(!y)return!1;var t=document.body||document.documentElement,e=document.createElement("div");e.style.cssText="width:10px;padding:2px;-webkit-box-sizing:border-box;box-sizing:border-box;",t.appendChild(e);var i="10px"===v(e,null).width;return t.removeChild(e),i}(),T=0,E=p(window),S=function(t,e){e=e||{},p.extend(this,S.options,e,S.settings),this.$el=p(t),this.element=t,this.unique="shuffle_"+T++,this._fire(S.EventType.LOADING),this._init(),i(function(){this.initialized=!0,this._fire(S.EventType.DONE)},this,16)};return S.EventType={LOADING:"loading",DONE:"done",LAYOUT:"layout",REMOVED:"removed"},S.ClassName={BASE:_,SHUFFLE_ITEM:"shuffle-item",FILTERED:"filtered",CONCEALED:"concealed"},S.options={group:g,speed:250,easing:"ease-out",itemSelector:"",sizer:null,gutterWidth:0,columnWidth:0,delimeter:null,buffer:0,columnThreshold:y?.01:.1,initialSort:null,throttle:function(i,n,s){var o,r,a,l=null,h=0;s=s||{};var u=function(){h=!1===s.leading?0:p.now(),l=null,a=i.apply(o,r),o=r=null};return function(){var t=p.now();h||!1!==s.leading||(h=t);var e=n-(t-h);return o=this,r=arguments,e<=0||n<e?(clearTimeout(l),l=null,h=t,a=i.apply(o,r),o=r=null):l||!1===s.trailing||(l=setTimeout(u,e)),a}},throttleTime:300,sequentialFadeDelay:150,supported:f},S.settings={useSizer:!1,itemCss:{position:"absolute",top:0,left:0,visibility:"visible"},revealAppendedDelay:300,lastSort:{},lastFilter:g,enabled:!0,destroyed:!1,initialized:!1,_animations:[],_transitions:[],_isMovementCanceled:!1,styleQueue:[]},S.Point=C,S._getItemTransformString=function(t,e){return m?"translate3d("+t.x+"px, "+t.y+"px, 0) scale3d("+e+", "+e+", 1)":"translate("+t.x+"px, "+t.y+"px) scale("+e+")"},S._getNumberStyle=function(t,e,i){if(y){i=i||v(t,null);var n=S._getFloat(i[e]);return b||"width"!==e?b||"height"!==e||(n+=S._getFloat(i.paddingTop)+S._getFloat(i.paddingBottom)+S._getFloat(i.borderTopWidth)+S._getFloat(i.borderBottomWidth)):n+=S._getFloat(i.paddingLeft)+S._getFloat(i.paddingRight)+S._getFloat(i.borderLeftWidth)+S._getFloat(i.borderRightWidth),n}return S._getFloat(p(t).css(e))},S._getFloat=function(t){return n(parseFloat(t))},S._getOuterWidth=function(t,e){var i=v(t,null),n=S._getNumberStyle(t,"width",i);e&&(n+=S._getNumberStyle(t,"marginLeft",i)+S._getNumberStyle(t,"marginRight",i));return n},S._getOuterHeight=function(t,e){var i=v(t,null),n=S._getNumberStyle(t,"height",i);e&&(n+=S._getNumberStyle(t,"marginTop",i)+S._getNumberStyle(t,"marginBottom",i));return n},S._skipTransition=function(t,e,i){var n=t.style[h];t.style[h]="0ms",e.call(i);t.offsetWidth;t.style[h]=n},S.prototype._init=function(){this.$items=this._getItems(),this.sizer=this._getElementOption(this.sizer),this.sizer&&(this.useSizer=!0),this.$el.addClass(S.ClassName.BASE),this._initItems(),E.on("resize."+_+"."+this.unique,this._getResizeFunction());var t=this.$el.css(["position","overflow"]),e=S._getOuterWidth(this.element);this._validateStyles(t),this._setColumns(e),this.shuffle(this.group,this.initialSort),this.supported&&i(function(){this._setTransitions(),this.element.style[s]="height "+this.speed+"ms "+this.easing},this)},S.prototype._getResizeFunction=function(){var t=p.proxy(this._onResize,this);return this.throttle?this.throttle(t,this.throttleTime):t},S.prototype._getElementOption=function(t){return"string"==typeof t?this.$el.find(t)[0]||null:t&&t.nodeType&&1===t.nodeType?t:t&&t.jquery?t[0]:null},S.prototype._validateStyles=function(t){"static"===t.position&&(this.element.style.position="relative"),"hidden"!==t.overflow&&(this.element.style.overflow="hidden")},S.prototype._filter=function(t,e){t=t||this.lastFilter,e=e||this.$items;var i=this._getFilteredSets(t,e);return this._toggleFilterClasses(i.filtered,i.concealed),"string"==typeof(this.lastFilter=t)&&(this.group=t),i.filtered},S.prototype._getFilteredSets=function(i,t){var n=p(),s=p();return i===g?n=t:o(t,function(t){var e=p(t);this._doesPassFilter(i,e)?n=n.add(e):s=s.add(e)},this),{filtered:n,concealed:s}},S.prototype._doesPassFilter=function(t,e){if(p.isFunction(t))return t.call(e[0],e,this);var i=e.data("groups"),n=this.delimeter&&!p.isArray(i)?i.split(this.delimeter):i;return-1<p.inArray(t,n)},S.prototype._toggleFilterClasses=function(t,e){t.removeClass(S.ClassName.CONCEALED).addClass(S.ClassName.FILTERED),e.removeClass(S.ClassName.FILTERED).addClass(S.ClassName.CONCEALED)},S.prototype._initItems=function(t){(t=t||this.$items).addClass([S.ClassName.SHUFFLE_ITEM,S.ClassName.FILTERED].join(" ")),t.css(this.itemCss).data("point",new C).data("scale",1)},S.prototype._updateItemCount=function(){this.visibleItems=this._getFilteredItems().length},S.prototype._setTransition=function(t){t.style[s]=c+" "+this.speed+"ms "+this.easing+", opacity "+this.speed+"ms "+this.easing},S.prototype._setTransitions=function(t){o(t=t||this.$items,function(t){this._setTransition(t)},this)},S.prototype._setSequentialDelay=function(t){this.supported&&o(t,function(t,e){t.style[l]="0ms,"+(e+1)*this.sequentialFadeDelay+"ms"},this)},S.prototype._getItems=function(){return this.$el.children(this.itemSelector)},S.prototype._getFilteredItems=function(){return this.$items.filter("."+S.ClassName.FILTERED)},S.prototype._getConcealedItems=function(){return this.$items.filter("."+S.ClassName.CONCEALED)},S.prototype._getColumnSize=function(t,e){var i;return 0===(i=p.isFunction(this.columnWidth)?this.columnWidth(t):this.useSizer?S._getOuterWidth(this.sizer):this.columnWidth?this.columnWidth:0<this.$items.length?S._getOuterWidth(this.$items[0],!0):t)&&(i=t),i+e},S.prototype._getGutterSize=function(t){return p.isFunction(this.gutterWidth)?this.gutterWidth(t):this.useSizer?S._getNumberStyle(this.sizer,"marginLeft"):this.gutterWidth},S.prototype._setColumns=function(t){var e=t||S._getOuterWidth(this.element),i=this._getGutterSize(e),n=this._getColumnSize(e,i),s=(e+i)/n;Math.abs(Math.round(s)-s)<this.columnThreshold&&(s=Math.round(s)),this.cols=Math.max(Math.floor(s),1),this.containerWidth=e,this.colWidth=n},S.prototype._setContainerSize=function(){this.$el.css("height",this._getContainerSize())},S.prototype._getContainerSize=function(){return a(this.positions)},S.prototype._fire=function(t,e){this.$el.trigger(t+"."+_,e&&e.length?e:[this])},S.prototype._resetCols=function(){var t=this.cols;for(this.positions=[];t--;)this.positions.push(0)},S.prototype._layout=function(t,e){o(t,function(t){this._layoutItem(t,!!e)},this),this._processStyleQueue(),this._setContainerSize()},S.prototype._layoutItem=function(t,e){var i=p(t),n=i.data(),s=n.point,o=n.scale,r={width:S._getOuterWidth(t,!0),height:S._getOuterHeight(t,!0)},a=this._getItemPosition(r);C.equals(s,a)&&1===o||(n.point=a,n.scale=1,this.styleQueue.push({$item:i,point:a,scale:1,opacity:e?0:1,skipTransition:e||0===this.speed,callfront:function(){e||i.css("visibility","visible")},callback:function(){e&&i.css("visibility","hidden")}}))},S.prototype._getItemPosition=function(t){for(var e=this._getColumnSpan(t.width,this.colWidth,this.cols),i=this._getColumnSet(e,this.cols),n=this._getShortColumn(i,this.buffer),s=new C(Math.round(this.colWidth*n),Math.round(i[n])),o=i[n]+t.height,r=this.cols+1-i.length,a=0;a<r;a++)this.positions[n+a]=o;return s},S.prototype._getColumnSpan=function(t,e,i){var n=t/e;return Math.abs(Math.round(n)-n)<this.columnThreshold&&(n=Math.round(n)),Math.min(Math.ceil(n),i)},S.prototype._getColumnSet=function(t,e){if(1===t)return this.positions;for(var i=e+1-t,n=[],s=0;s<i;s++)n[s]=a(this.positions.slice(s,s+t));return n},S.prototype._getShortColumn=function(t,e){for(var i=(o=t,Math.min.apply(Math,o)),n=0,s=t.length;n<s;n++)if(t[n]>=i-e&&t[n]<=i+e)return n;var o;return 0},S.prototype._shrink=function(t){o(t||this._getConcealedItems(),function(t){var e=p(t),i=e.data();.001!==i.scale&&(i.scale=.001,this.styleQueue.push({$item:e,point:i.point,scale:.001,opacity:0,callback:function(){e.css("visibility","hidden")}}))},this)},S.prototype._onResize=function(){this.enabled&&!this.destroyed&&(S._getOuterWidth(this.element)!==this.containerWidth&&this.update())},S.prototype._getStylesForTransition=function(t){var e={opacity:t.opacity};return this.supported?e[d]=S._getItemTransformString(t.point,t.scale):(e.left=t.point.x,e.top=t.point.y),e},S.prototype._transition=function(t){var e=this._getStylesForTransition(t);this._startItemAnimation(t.$item,e,t.callfront||p.noop,t.callback||p.noop)},S.prototype._startItemAnimation=function(t,e,i,n){function s(t){t.target===t.currentTarget&&(p(t.target).off(u,s),o._removeTransitionReference(r),n())}var o=this,r={$element:t,handler:s};if(i(),!this.initialized)return t.css(e),void n();if(this.supported)t.css(e),t.on(u,s),this._transitions.push(r);else{var a=t.stop(!0).animate(e,this.speed,"swing",n);this._animations.push(a.promise())}},S.prototype._processStyleQueue=function(t){this.isTransitioning&&this._cancelMovement();var e=p();o(this.styleQueue,function(t){t.skipTransition?this._styleImmediately(t):(e=e.add(t.$item),this._transition(t))},this),0<e.length&&this.initialized&&0<this.speed?(this.isTransitioning=!0,this.supported?this._whenCollectionDone(e,u,this._movementFinished):this._whenAnimationsDone(this._movementFinished)):t||i(this._layoutEnd,this),this.styleQueue.length=0},S.prototype._cancelMovement=function(){this.supported?o(this._transitions,function(t){t.$element.off(u,t.handler)}):(this._isMovementCanceled=!0,this.$items.stop(!0),this._isMovementCanceled=!1),this._transitions.length=0,this.isTransitioning=!1},S.prototype._removeTransitionReference=function(t){var e=p.inArray(t,this._transitions);-1<e&&this._transitions.splice(e,1)},S.prototype._styleImmediately=function(t){S._skipTransition(t.$item[0],function(){t.$item.css(this._getStylesForTransition(t))},this)},S.prototype._movementFinished=function(){this.isTransitioning=!1,this._layoutEnd()},S.prototype._layoutEnd=function(){this._fire(S.EventType.LAYOUT)},S.prototype._addItems=function(t,e,i){this._initItems(t),this._setTransitions(t),this.$items=this._getItems(),this._shrink(t),o(this.styleQueue,function(t){t.skipTransition=!0}),this._processStyleQueue(!0),e?this._addItemsToEnd(t,i):this.shuffle(this.lastFilter)},S.prototype._addItemsToEnd=function(t,e){var i=this._filter(null,t).get();this._updateItemCount(),this._layout(i,!0),e&&this.supported&&this._setSequentialDelay(i),this._revealAppended(i)},S.prototype._revealAppended=function(t){i(function(){o(t,function(t){var e=p(t);this._transition({$item:e,opacity:1,point:e.data("point"),scale:1})},this),this._whenCollectionDone(p(t),u,function(){p(t).css(l,"0ms"),this._movementFinished()})},this,this.revealAppendedDelay)},S.prototype._whenCollectionDone=function(t,e,i){function n(t){t.target===t.currentTarget&&(p(t.target).off(e,n),++s===o&&(r._removeTransitionReference(a),i.call(r)))}var s=0,o=t.length,r=this,a={$element:t,handler:n};t.on(e,n),this._transitions.push(a)},S.prototype._whenAnimationsDone=function(t){p.when.apply(null,this._animations).always(p.proxy(function(){this._animations.length=0,this._isMovementCanceled||t.call(this)},this))},S.prototype.shuffle=function(t,e){this.enabled&&(t||(t=g),this._filter(t),this._updateItemCount(),this._shrink(),this.sort(e))},S.prototype.sort=function(t){if(this.enabled){this._resetCols();var e=t||this.lastSort,i=this._getFilteredItems().sorted(e);this._layout(i),this.lastSort=e}},S.prototype.update=function(t){this.enabled&&(t||this._setColumns(),this.sort())},S.prototype.layout=function(){this.update(!0)},S.prototype.appended=function(t,e,i){this._addItems(t,!0===e,!1!==i)},S.prototype.disable=function(){this.enabled=!1},S.prototype.enable=function(t){!(this.enabled=!0)!==t&&this.update()},S.prototype.remove=function(t){t.length&&t.jquery&&(this._toggleFilterClasses(p(),t),this._shrink(t),this.sort(),this.$el.one(S.EventType.LAYOUT+"."+_,p.proxy(function(){t.remove(),this.$items=this._getItems(),this._updateItemCount(),this._fire(S.EventType.REMOVED,[t,this]),t=null},this)))},S.prototype.destroy=function(){E.off("."+this.unique),this.$el.removeClass(_).removeAttr("style").removeData(_),this.$items.removeAttr("style").removeData("point").removeData("scale").removeClass([S.ClassName.CONCEALED,S.ClassName.FILTERED,S.ClassName.SHUFFLE_ITEM].join(" ")),this.$items=null,this.$el=null,this.sizer=null,this.element=null,this._transitions=null,this.destroyed=!0},p.fn.shuffle=function(i){var n=Array.prototype.slice.call(arguments,1);return this.each(function(){var t=p(this),e=t.data(_);e?"string"==typeof i&&e[i]&&e[i].apply(e,n):(e=new S(this,i),t.data(_,e))})},p.fn.sorted=function(t){var s=p.extend({},p.fn.sorted.defaults,t),e=this.get(),o=!1;return e.length?s.randomize?function(t){var e,i,n=t.length;if(!n)return t;for(;--n;)e=t[i=Math.floor(Math.random()*(n+1))],t[i]=t[n],t[n]=e;return t}(e):(p.isFunction(s.by)&&e.sort(function(t,e){if(o)return 0;var i=s.by(p(t)),n=s.by(p(e));return i===r&&n===r?(o=!0,0):i<n||"sortFirst"===i||"sortLast"===n?-1:n<i||"sortLast"===i||"sortFirst"===n?1:0}),o?this.get():(s.reverse&&e.reverse(),e)):[]},p.fn.sorted.defaults={reverse:!1,by:null,randomize:!1},S});